<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6 | Technorage</title><meta name="generator" content="Jekyll v4.1.1"><meta property="og:title" content="Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6"><meta name="author" content="deepu"><meta property="og:locale" content="en_US"><meta name="description" content="Building a concurrent web server in Rust, Go, JS, TS, .NET, and Java to compare concurrency performance"><meta property="og:description" content="Building a concurrent web server in Rust, Go, JS, TS, .NET, and Java to compare concurrency performance"><link rel="canonical" href="https://deepu.tech/concurrency-in-modern-languages-final/"><meta property="og:url" content="https://deepu.tech/concurrency-in-modern-languages-final/"><meta property="og:site_name" content="Technorage"><meta property="og:type" content="article"><meta property="article:published_time" content="2022-02-04T00:00:00+01:00"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6"><script type="application/ld+json">{"datePublished":"2022-02-04T00:00:00+01:00","description":"Building a concurrent web server in Rust, Go, JS, TS, .NET, and Java to compare concurrency performance","mainEntityOfPage":{"@type":"WebPage","@id":"https://deepu.tech/concurrency-in-modern-languages-final/"},"author":{"@type":"Person","name":"deepu"},"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://deepu.tech/assets/images/logo.png"},"name":"deepu"},"url":"https://deepu.tech/concurrency-in-modern-languages-final/","headline":"Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6","dateModified":"2022-02-04T00:00:00+01:00","@context":"https://schema.org"}</script><link rel="canonical" href="https://deepu.tech/concurrency-in-modern-languages-final/"><meta property="og:url" content=""><meta name="monetization" content="$ilp.uphold.com/Aw7eGpxKNyK7"><meta name="twitter:site" content="@deepu105"><meta name="twitter:creator" content="@deepu105"><meta name="twitter:title" content="Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6"><meta name="twitter:description" content="Building a concurrent web server in Rust, Go, JS, TS, .NET, and Java to compare concurrency performance"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://i.imgur.com/JGoa8Xe.png"><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha256-L/W5Wfqfa0sdBNIKN9cG6QA5F2qx4qICmU2VgLruv9Y=" crossorigin="anonymous" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha256-L/W5Wfqfa0sdBNIKN9cG6QA5F2qx4qICmU2VgLruv9Y=" crossorigin="anonymous"></noscript><link href="/assets/css/screen.css" rel="stylesheet"><link href="/assets/css/main.css" rel="stylesheet"></head><body class="layout-post"><noscript id="deferred-styles"><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" crossorigin="anonymous"></noscript><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down pr-md-0 pl-md-0"><div class="container d-flex align-items-center"><a class="navbar-brand" href="/"><h2 class="sitetitle">Technorage</h2><small class="sitetitlesub">Where I rage about technology and stuff! </small></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarMediumish"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">About</a></li><li class="nav-item active"><a class="nav-link" href="/blogs/"><i class="fas fa-blog"></i> Blog</a></li><li class="nav-item"><a class="nav-link" href="/books"><i class="fas fa-book"></i> Books</a></li><li class="nav-item"><a class="nav-link" href="/appearances"><i class="fas fa-chalkboard-teacher"></i> Appearances</a></li><style>.lunrsearchresult .title{color:#d9230f}.lunrsearchresult .url{color:silver}.lunrsearchresult a{display:block;color:#777}.lunrsearchresult a:focus,.lunrsearchresult a:hover{text-decoration:none}.lunrsearchresult a:hover .title{text-decoration:underline}</style><form class="bd-search" onsubmit='return lunr_search(document.getElementById("lunrsearch").value)'><input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."></form><div id="lunrsearchresults"><ul></ul></div></ul></div></div></nav><div class="site-content"><div class="container"><div class="main-content"><div class="container mt-5"><div class="row"><div class="col-lg-2 pl-0"><div class="sticky-top sticky-top-offset"><div class="popover-wrapper d-none d-lg-block"><a href="#"><h2 class="popover-title"><i class="fas fa-stream fa-lg"></i> TOC</h2></a><div class="popover-content"><div class="toc lead"><h3 class="font-weight-bold">Summary</h3><ul><li><a href="#what-is-concurrency">What is concurrency</a></li><li><a href="#benchmarking--comparison">Benchmarking &amp; comparison</a><ul><li><a href="#benchmarking-conditions">Benchmarking conditions</a></li><li><a href="#comparison-parameters">Comparison parameters</a></li></ul></li><li><a href="#benchmark-results">Benchmark results</a><ul><li><a href="#results-from-wrk">Results from <a href="https://github.com/wg/wrk">wrk</a></a></li><li><a href="#results-from-drill">Results from <a href="https://github.com/fcsonline/drill">drill</a></a></li><li><a href="#previous-apachebench-results-with-thread-blocking">Previous ApacheBench results with thread blocking</a></li></ul></li><li><a href="#conclusion">Conclusion</a><ul><li><a href="#benchmark-observations">Benchmark observations</a></li><li><a href="#community-consensus">Community consensus</a></li><li><a href="#simplicity">Simplicity</a></li><li><a href="#ecosystem">Ecosystem</a></li></ul></li></ul></div></div></div><div class="share"><p>Share</p><ul><li class="ml-1 mr-1"><a target="_blank" href="https://twitter.com/intent/tweet?text=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6 by @deepu105 &url=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"twitter-share","width=550,height=235"),!1' title="Twitter"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"linkedin-share","width=550,height=435"),!1' title="Linkedin"><i class="fab fa-linkedin-in"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://news.ycombinator.com/submitlink?u=https://deepu.tech/concurrency-in-modern-languages-final/&t=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6" onclick='return window.open(this.href,"hackernews-share","width=550,height=435"),!1' title="Hacker News"><i class="fab fa-hacker-news-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.reddit.com/submit?url=https://deepu.tech/concurrency-in-modern-languages-final/&title=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6" onclick='return window.open(this.href,"reddit-share","width=550,height=435"),!1' title="Reddit"><i class="fab fa-reddit-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://facebook.com/sharer.php?u=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1' title="Facebook"><i class="fab fa-facebook-f"></i></a></li></ul><div class="sep"></div><ul><li><script type="text/javascript">var HYVOR_TALK_WEBSITE=4123</script><script async type="text/javascript" src="//talk.hyvor.com/web-api/count/"></script><span data-talk-id="https://deepu.tech/concurrency-in-modern-languages-final/"></span></li></ul></div><div class="ad-vertical-md"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3I&placement=deeputech" id="_carbonads_js"></script></div></div></div><div class="col-lg-9 flex-first flex-lg-unordered"><div class="mainheading"><h1 class="posttitle">Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6</h1><img data-src="https://i.imgur.com/JGoa8Xe.png" alt="Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6" class="featured-image img-fluid lozad" src="/assets/images/placeholder.jpg"><div class="row post-top-meta"><div class="col-12 text-center text-md-left mb-4 mb-md-0"><img class="author-thumb lozad" src="/assets/images/placeholder.jpg" data-src="https://www.gravatar.com/avatar/7f408bc67dc9ae3b288ee92d16d3c4c2?s=250&d=mm&r=x" alt="Deepu K Sasidharan"> <a target="_blank" class="link-dark" href="https://www.deepu.tech">Deepu K Sasidharan</a><a target="_blank" href="https://twitter.com/deepu105" class="btn follow"><i class="fab fa-twitter"></i> Follow</a><span class="separator d-none d-md-inline-block">| </span><span class="author-description"><small><time class="post-date" datetime="2022-02-04">04 Feb 2022</time> </small><span class="separator d-inline-block">| </span><small>9 mins read </small><span class="separator d-inline-block d-lg-none">| </span><span class="d-inline-block d-lg-none"><div class="share" style="margin-top:0"><ul><li class="ml-1 mr-1"><a target="_blank" href="https://twitter.com/intent/tweet?text=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6 by @deepu105 &url=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"twitter-share","width=550,height=235"),!1' title="Twitter"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"linkedin-share","width=550,height=435"),!1' title="Linkedin"><i class="fab fa-linkedin-in"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://news.ycombinator.com/submitlink?u=https://deepu.tech/concurrency-in-modern-languages-final/&t=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6" onclick='return window.open(this.href,"hackernews-share","width=550,height=435"),!1' title="Hacker News"><i class="fab fa-hacker-news-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.reddit.com/submit?url=https://deepu.tech/concurrency-in-modern-languages-final/&title=Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6" onclick='return window.open(this.href,"reddit-share","width=550,height=435"),!1' title="Reddit"><i class="fab fa-reddit-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://facebook.com/sharer.php?u=https://deepu.tech/concurrency-in-modern-languages-final/" onclick='return window.open(this.href,"facebook-share","width=550,height=435"),!1' title="Facebook"><i class="fab fa-facebook-f"></i></a></li></ul></div></span></span></div></div></div><div class="panel"><p><strong>This is part of my "concurrency in modern programming languages" series</strong></p><ol><li><a href="/concurrency-in-modern-languages/">Concurrency in modern programming languages: Introduction</a></li><li><a href="/concurrency-in-modern-languages-rust/">Concurrency in modern programming languages: Rust</a></li><li><a href="/concurrency-in-modern-languages-go/">Concurrency in modern programming languages: Golang</a></li><li><a href="/concurrency-in-modern-languages-js/">Concurrency in modern programming languages: JavaScript on NodeJS</a></li><li><a href="/concurrency-in-modern-languages-ts/">Concurrency in modern programming languages: TypeScript on Deno</a></li><li><a href="/concurrency-in-modern-languages-java/">Concurrency in modern programming languages: Java</a></li><li><strong>Concurrency in modern programming languages: Rust vs Go vs Java vs Node.js vs Deno vs .NET 6</strong></li></ol></div><div class="article-post"><p>This is a multi-part series where I’ll discuss concurrency in modern programming languages. I will be building and benchmarking a concurrent web server, inspired by the example from the <a href="https://doc.rust-lang.org/book/ch20-00-final-project-a-web-server.html">Rust book</a>, in popular languages like Rust, Go, JavaScript (NodeJS), TypeScript (Deno), Kotlin, and Java to compare concurrency and its performance between these languages/platforms. The chapters of this series are as below.</p><ol><li><a href="https://deepu.tech/concurrency-in-modern-languages/">Introduction</a></li><li><a href="https://deepu.tech/concurrency-in-modern-languages-rust/">Concurrent web server in Rust</a></li><li><a href="https://deepu.tech/concurrency-in-modern-languages-go/">Concurrent web server in Golang</a></li><li><a href="https://deepu.tech/concurrency-in-modern-languages-js/">Concurrent web server in JavaScript with NodeJS</a></li><li><a href="https://deepu.tech/concurrency-in-modern-languages-ts/">Concurrent web server in TypeScript with Deno</a></li><li><a href="https://deepu.tech/concurrency-in-modern-languages-java/">Concurrent web server in Java with JVM</a></li><li><strong>Comparison and conclusion of benchmarks</strong></li></ol><hr><h2 id="what-is-concurrency">What is concurrency</h2><blockquote><p>Concurrency is one of the most complex aspects of programming, and depending on your language of choice, the complexity can be anywhere from “that looks confusing” to “what black magic is this”.</p></blockquote><p>Concurrency is the ability where multiple tasks can be executed in overlapping time periods, in no specific order without affecting the final outcome. Concurrency is a very broad term and can be achieved by multi-threading, parallelism, and/or asynchronous processing.</p><p><img src="https://i.imgur.com/glpIttD.jpeg" alt="concurrency"></p><p>First, I suggest you read the <a href="https://deepu.tech/concurrency-in-modern-languages/">introduction post</a> to understand this post better.</p><h2 id="benchmarking--comparison">Benchmarking &amp; comparison</h2><p>In the previous posts, I built a simple web server in Rust, Go, Node.js, Deno, and Java. I kept it as simple as possible without using external dependencies as much as possible. I also kept the code similar across languages. In this final post, we will compare the performance of all these implementations to see which language offers the best performance for a concurrent web server.</p><p>If the language supports both asynchronous and multi-threaded concurrency, we will try both and a combination of both and pick the best performer for the comparison. The complexity of the application will hence depend on language features and language complexity. We will use whatever the language provides to make concurrency performance as good as possible without over-complicating stuff. The web server will just serve one endpoint<del>, and it will add a sleep of two seconds on every tenth request. This will simulate a more realistic load, IMO.</del></p><p>We will use promises, thread pools, and workers if required and if the language supports it. We won’t use any unnecessary I/O in the application.</p><p>The code implementations are probably not the best possible; if you have a suggestion for improvement, please open and issue or PR on <a href="https://github.com/deepu105/concurrency-benchmarks">this repository</a>. Further improvements possible are:</p><ul><li>Use a thread pool for Java multi-threaded version</li><li>Use a Java webserver library</li><li>Use <a href="https://github.com/deepu105/concurrency-benchmarks/issues/5"><code class="language-plaintext highlighter-rouge">createReadStream</code> for Node.js</a></li><li><del>Use Warp, Rocket or actix-web for Rust</del> Added a Rust actix-web sample to comparison</li></ul><p><strong><em>Disclaimer</em></strong>: I’m not claiming this to be an accurate scientific method or the best benchmark for concurrency. I’m pretty sure different use cases will have different results, and real-world web servers will have more complexity that requires communication between concurrent processes affecting performance. I’m just trying to provide some simple base comparisons for a simple use case. Also, my knowledge of some languages is better than others; hence I might miss some optimizations here and there. So please don’t shout at me. If you think the code for a particular language can be improved out of the box to enhance concurrency performance, let me know. If you think this benchmark is useless, well, please suggest a better one :)</p><p><strong>Update</strong>: Despite the above disclaimer, people were still mad at me for using <code class="language-plaintext highlighter-rouge">thread.sleep</code> to simulate blocking and for using ApacheBench for this benchmark. I have since updated the post with more benchmarks using different tools. It’s still not scientific or the best way to benchmark concurrency. This is just me, doing experiments. If you have better ideas, please feel free to use the code and publish a follow-up or comment with your results, and I’ll update the post with it and attribute you.</p><p>All the implementations used in this comparison can be found in <a href="https://github.com/deepu105/concurrency-benchmarks/tree/nosleep">the nosleep branch of this GitHub repository</a>.</p><h3 id="benchmarking-conditions">Benchmarking conditions</h3><p>These will be some of the conditions I’ll use for the benchmark.</p><ul><li>The latest stable release versions of language/runtimes available are used, and as of writing, those are:<ul><li>Rust: <code class="language-plaintext highlighter-rouge">1.58.1-Stable</code></li><li>Go: <code class="language-plaintext highlighter-rouge">1.17.6</code></li><li>Java: <code class="language-plaintext highlighter-rouge">OpenJDK 17.0.2</code></li><li>Node.js: <code class="language-plaintext highlighter-rouge">17.4.0</code></li><li>Deno: <code class="language-plaintext highlighter-rouge">1.18.1</code></li><li>.NET: <code class="language-plaintext highlighter-rouge">6.0.100</code></li></ul></li><li><strong>Update</strong>: Thread.sleep has been removed from all implementations.</li><li>We will be using external dependencies only if that is the standard recommended way in the language.<ul><li>latest versions of such dependencies as of writing will be used</li></ul></li><li>We are not going to look at improving concurrency performance using any configuration tweaks</li><li><strong>Update</strong>: Many people pointed out that ApacheBench is not the best tool for this benchmark. I have hence also included results from <a href="https://github.com/wg/wrk">wrk</a> and <a href="https://github.com/fcsonline/drill">drill</a></li><li>We will use ApacheBench for the benchmarks with the below settings:<ul><li>Concurrency factor of 100 requests</li><li>10000 total requests</li><li>The benchmark will be done ten times for each language with a warmup round, and the mean values will be used.</li><li>ApacheBench version on Fedora: <code class="language-plaintext highlighter-rouge">httpd-tools-2.4.52-1.fc35.x86_64</code></li><li>Command used: <code class="language-plaintext highlighter-rouge">ab -c 100 -n 10000 http://localhost:8080/</code></li></ul></li><li>All the benchmarks are run on the same machine running Fedora 35 on an Intel i9-11900H (8 core/16 thread) processor with 64GB memory.<ul><li>The <code class="language-plaintext highlighter-rouge">wrk</code> and <code class="language-plaintext highlighter-rouge">drill</code> clients were run from another similar machine on the same network and also from the same computer; the results were more or less the same; I used the results from the client computer for comparisons.</li></ul></li></ul><h3 id="comparison-parameters">Comparison parameters</h3><p>I’ll be comparing the below aspects related to concurrency as well.</p><ul><li>Performance, based on benchmark results</li><li>Community consensus</li><li>Ease of use and simplicity, especially for complex use cases</li><li>External libraries and ecosystem for concurrency</li></ul><h2 id="benchmark-results">Benchmark results</h2><p><strong>Updated</strong>: I have updated the benchmark results with the results from <a href="https://github.com/wg/wrk">wrk</a>, <a href="https://github.com/fcsonline/drill">drill</a> and also updated previous results from ApacheBench after tweaks suggested by various folks.</p><p><strong>Update 2</strong>: There is a <a href="https://github.com/deepu105/concurrency-benchmarks/tree/nosleep/dotnetws">.NET 6 version</a> in the repo now, thanks to <a href="https://github.com/srollinet">srollinet</a> for the PR. Benchmarks updated with the .NET results.</p><p><strong>Update 3</strong>: Rust using actix-web and Java undertow is now included in the <code class="language-plaintext highlighter-rouge">wrk</code> and <code class="language-plaintext highlighter-rouge">drill</code> benchmarks. The implementations were simplified to return just a string instead of doing a file I/O for these, and hence they are shown as a separate set. I started this series as a concurrency in languages experiment. Now, this feels like a benchmark of web server frameworks; while concurrency is an important aspect of these, I’m not sure if the results mean anything from a concurrency of the language aspect.</p><h3 id="results-from-wrk">Results from <a href="https://github.com/wg/wrk">wrk</a></h3><p>Benchmark using <code class="language-plaintext highlighter-rouge">wrk</code> with the below command (Threads 8, Connections 500, duration 30 seconds):</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>wrk -t8 -c500 -d30s http://127.0.0.1:8080
</pre></td></tr></tbody></table></code></pre></div></div><p><img src="https://i.imgur.com/j83tChU.png" alt="wrk benchmarks with Go HTTP version"></p><p><strong>Update</strong> comparison of Go HTTP, Rust actix-web, Java Undertow, and .NET 6</p><p><img src="https://i.imgur.com/sUMZ1OX.png" alt="wrk benchmarks with web servers"></p><p>The Go, Rust, and Java web server versions blow everything out of the water when it comes to req/second performance. If we remove it, we get a better picture as below.</p><p><img src="https://i.imgur.com/rDWT8Mi.png" alt="wrk benchmarks without web servers"></p><h3 id="results-from-drill">Results from <a href="https://github.com/fcsonline/drill">drill</a></h3><p>Benchmark using <code class="language-plaintext highlighter-rouge">drill</code> with concurrency 1000 and 1 million requests</p><p><img src="https://i.imgur.com/z4K0lJ8.png" alt="drill benchmark 1"></p><p><strong>Update</strong> comparison of Go HTTP, Rust actix-web, Java Undertow, and .NET 6</p><p><img src="https://i.imgur.com/eWDkxyz.png" alt="drill benchmark 1 with web servers"></p><p>Benchmark using <code class="language-plaintext highlighter-rouge">drill</code> with concurrency 2000 and 1 million requests</p><p><img src="https://i.imgur.com/Xfp1trI.png" alt="drill benchmark 2"></p><p><strong>Update</strong> comparison of Go HTTP, Rust actix-web, Java Undertow, and .NET 6</p><p><img src="https://i.imgur.com/qF5BsSj.png" alt="drill benchmark 2 with web servers"></p><h3 id="previous-apachebench-results-with-thread-blocking">Previous ApacheBench results with thread blocking</h3><p>The average values for different metrics with a <code class="language-plaintext highlighter-rouge">thread.sleep</code> every ten requests across ten benchmark runs are as below:</p><p><img src="https://i.imgur.com/r84p64Q.png" alt="Apache bench average"></p><p>You can find all the results used in the <a href="https://github.com/deepu105/concurrency-benchmarks/tree/nosleep/results">GitHub repo</a></p><h2 id="conclusion">Conclusion</h2><p>Based on the benchmark results, these are my observations.</p><h3 id="benchmark-observations">Benchmark observations</h3><p>Since recommendations based on benchmarks are hot topics, I’ll just share my observations, and you can make decisions yourself.</p><ul><li>For the HTTP server benchmark using <code class="language-plaintext highlighter-rouge">wrk</code>, Go HTTP wins in request/sec, latency, and throughput, but it uses more memory and CPU than Rust. This might be because Go has one of the best built-in HTTP libraries, and it’s extremely tuned for the best possible performance; hence it’s not fair to compare that with the simple TCP implementations I did for Java and Rust. But you can compare it to Node.js and Deno as they also have standard HTTP libs that are used here for benchmarks. <strong>Update</strong>: I have now compared Go HTTP to Rust actix-web and Java Undertow, and surprisingly Undertow performs better, and actix-web comes second. Probably a Go web framework, like Gin, will come closer to Undertow and actix-web.</li><li>The Go TCP version is a fair comparison to the Rust and Java implementations, and in this case, Both Java and Rust outperforms Go and hence would be logical to expect third party HTTP libraries in Rust and Java that can compete with Go and if I’m a betting person I would bet that there is a Rust library that can outperform Go.</li><li>Resource usage is a whole different story, Rust seems to use the least memory and CPU consistently in all the benchmarks, while Java uses the most memory, and Node.js multi-threaded version uses the most CPU.</li><li>Asynchronous Rust seems to perform worst than multi-threaded Rust implementations.</li><li>In the benchmarks using <code class="language-plaintext highlighter-rouge">drill</code>, the Asynchronous Java version outperformed Rust and was a surprise to me.</li><li>Java and Deno have more failed requests than others.</li><li>When concurrent requests are increased from 1000 to 2000, most implementations have a very high failure rate. The Go HTTP and Rust Tokio versions have nearly 100% failure rates, while multi-threaded Node.js have the least failure and have good performance at that concurrency level but with high CPU usage. It runs multiple versions of V8 for multi-threading, which explains the high CPU use.</li><li>Overall, Node.js still seems to perform better than Deno.</li><li>Another important takeaway is that benchmarking tools like ApacheBench, wrk, or drill seem to offer very different results, and hence micro-benchmarks are not as reliable as ultimate performance benchmarks. Based on the actual use case and implementation-specific details, there could be a lot of differences. Thanks to <a href="https://dev.to/eamonnerbonne/comment/1lpkf">Eamon Nerbonne for pointing it out</a>.</li><li>Apache Benchmarks run on versions with and without <code class="language-plaintext highlighter-rouge">thread.sleep</code> doesn’t say much as the results are similar for all implementations, and it might be due to limitations of the ApacheBench tool. Hence as many people pointed out, I’m disregarding them.</li></ul><p>For more comprehensive benchmarks for web frameworks, I recommend checking out TechEmpower’s <a href="https://www.techempower.com/benchmarks/">Web framework benchmarks</a></p><p><del>With ApacheBench, as you can see, there isn’t any significant difference between the languages when it comes to total time taken for 10k requests for a system with considerable thread blocking, which means for a real-world use case, the language choice isn’t going to be a huge factor for concurrency performance. But of course, if you want the best possible performance, then Rust clearly seems faster than other languages as it gives you the highest throughput, followed by Java and Golang. JavaScript and TypeScript are behind them, but not by a considerable margin. The Go version using the built-in HTTP server is the slowest of the bunch due to inconsistent performance across runs, probably due to garbage collection (GC) kicking in, causing spikes. Also interesting is to see the difference between the multi-threaded and asynchronous approaches. While for Rust, multi-threaded implementation performs the best by a slight margin, the asynchronous version performs slightly better for Java and JavaScript. But none of the differences is significant enough to justify suggesting one approach over another for this particular case. But in general, I would recommend using the asynchronous approach if available as it’s more flexible without some of the limitations you might encounter with threads.</del></p><h3 id="community-consensus">Community consensus</h3><p>The community consensus when it comes to concurrency performance is quite split. For example, both Rust and Go communities claim to be the best in concurrency performance. From personal experience, I find them relatively close in performance, with Rust having a slight lead over Go. The Node.js ecosystem was built over the promise of asynchronous concurrency performance, and there are testimonials of huge performance improvements when switching to Node.js. Java also boasts of real-world projects serving millions of concurrent requests without any issues; hence it’s hard to take a side here.</p><p>Another general observation is that Rust was quite consistent in terms of performance across runs while all other languages had some variance, especially when GC kicks in.</p><h3 id="simplicity">Simplicity</h3><p>While performance is an important aspect, ease of use and simplicity is also very important. I think it’s also important to differentiate between asynchronous and multi-threaded approaches.</p><p><strong>Asynchronous</strong>: I personally find Node.js and Deno the simplest and easy-to-use platforms for async concurrency. Golang would be my second choice as it’s also easy to use and simple without compromising on features or performance. Rust follows it as it is a bit more complex as it has more features and needs getting used to. I would rate Java last as it requires much more boilerplate, and doing asynchronous programming is more complex than in others. I hope project Loom fixes that for Java.</p><p><strong>Multi-threaded</strong>: For multi-threaded concurrency, I will put Rust first as it’s packed with features, and doing multi-threading is easy and worry-free in Rust due to memory and thread-safety. You don’t have to worry about race conditions and such. I’ll put Java and Go second here. Java has a mature ecosystem for multi-threading and is not too difficult to use. Go is very easy to use, but you don’t have a lot of control over OS threads else I would rate Go higher than Java. Finally, there are multi-threading capabilities in Node.js and Deno, but they are not as flexible as other languages; hence I’ll put them last.</p><h3 id="ecosystem">Ecosystem</h3><p>Rust has the best ecosystem for concurrency, in my opinion, followed by Java and Golang, which have matured options. Node.js and Deno, while not as good as others, offer a descent ecosystem as well.</p><hr><p>If you like this article, please leave a like or a comment.</p><p>You can follow me on <a href="https://twitter.com/deepu105">Twitter</a> and <a href="https://www.linkedin.com/in/deepu05/">LinkedIn</a>.</p></div><hr><p>Post <strong>7</strong> of <strong>7</strong> in series <strong>"concurrency in modern programming languages"</strong>.</p><p></p><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" rel="prev" href="/concurrency-in-modern-languages-java/">&laquo; Prev post in series</a><div class="clearfix"></div></div><div class="after-post-cats"><ul class="tags mb-4"></ul></div><div class="after-post-tags"><ul class="tags"><li><a class="smoothscroll" href="/tags#go">#go</a></li><li><a class="smoothscroll" href="/tags#java">#java</a></li><li><a class="smoothscroll" href="/tags#js">#js</a></li><li><a class="smoothscroll" href="/tags#rust">#rust</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" href="/state-of-pattern-matching-java/">&laquo; The state of pattern matching in Java 17</a> <a class="next d-block col-md-6 text-lg-right" href="/go-impressions-part-2/">Golang Finally Gets Generics! Does It Make Go a Better Language? &raquo;</a><div class="clearfix"></div></div><hr></div></div></div><div class="container"><div id="comments" class="row justify-content-center mb-5"><div class="col-md-8"><section class="hyvor"><div id="hyvor-talk-view"></div><script type="text/javascript">var HYVOR_TALK_WEBSITE=4123,HYVOR_TALK_CONFIG={url:"https://deepu.tech/concurrency-in-modern-languages-final/",id:"https://deepu.tech/concurrency-in-modern-languages-final/"}</script><script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script></section></div></div></div></div><div class="alertbar"><div class="container text-center"><span>Never miss a <b>story</b> from us, subscribe to our newsletter</span><form action="https://tech.us7.list-manage.com/subscribe/post?u=00729f6c6d6bb180801b9484e&amp;id=f521dede4b" method="post" name="mc-embedded-subscribe-form" id="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate><div class="mc-field-group"><input type="email" placeholder="Email address" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required> <input type="submit" value="Subscribe" name="subscribe" class="heart"></div></form></div></div></div><div class="jumbotron fortags lozad" data-background-image="/assets/images/jumbotron.jpg"><div class="d-md-flex h-100"><div class="col-md-4 transpdark align-self-center text-center h-100"><div class="d-md-flex align-items-center justify-content-center h-100"><h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2></div></div><div class="col-md-8 pt-1 ph-2 align-self-center text-center h-100"><a class="mt-1 mb-1" href="/tags#languages">languages (15)</a> <a class="mt-1 mb-1" href="/tags#programming">programming (15)</a> <a class="mt-1 mb-1" href="/tags#javascript">javascript (13)</a> <a class="mt-1 mb-1" href="/tags#java">java (11)</a> <a class="mt-1 mb-1" href="/tags#beginners">beginners (8)</a> <a class="mt-1 mb-1" href="/tags#rust">rust (8)</a> <a class="mt-1 mb-1" href="/tags#concurrency">concurrency (7)</a> <a class="mt-1 mb-1" href="/tags#go">go (7)</a> <a class="mt-1 mb-1" href="/tags#linux">linux (5)</a> <a class="mt-1 mb-1" href="/tags#microservices">microservices (5)</a> <a class="mt-1 mb-1" href="/tags#typescript">typescript (5)</a> <a class="mt-1 mb-1" href="/tags#computerscience">computerscience (4)</a> <a class="mt-1 mb-1" href="/tags#development">development (4)</a> <a class="mt-1 mb-1" href="/tags#fedora">fedora (4)</a> <a class="mt-1 mb-1" href="/tags#functional">functional (4)</a> <a class="mt-1 mb-1" href="/tags#thepragmaticprogrammer">thepragmaticprogrammer (4)</a> <a class="mt-1 mb-1" href="/tags#async">async (3)</a> <a class="mt-1 mb-1" href="/tags#jhipster">jhipster (3)</a> <a class="mt-1 mb-1" href="/tags#kubernetes">kubernetes (3)</a> <a class="mt-1 mb-1" href="/tags#azure">azure (2)</a> <a class="mt-1 mb-1" href="/tags#career">career (2)</a> <a class="mt-1 mb-1" href="/tags#codequality">codequality (2)</a> <a class="mt-1 mb-1" href="/tags#deno">deno (2)</a> <a class="mt-1 mb-1" href="/tags#discuss">discuss (2)</a> <a class="mt-1 mb-1" href="/tags#docker">docker (2)</a> <a class="mt-1 mb-1" href="/tags#garbagecollection">garbagecollection (2)</a> <a class="mt-1 mb-1" href="/tags#gnome">gnome (2)</a> <a class="mt-1 mb-1" href="/tags#golang">golang (2)</a> <a class="mt-1 mb-1" href="/tags#kde">kde (2)</a> <a class="mt-1 mb-1" href="/tags#node">node (2)</a> <a class="mt-1 mb-1" href="/tags#nodejs">nodejs (2)</a> <a class="mt-1 mb-1" href="/tags#openjdk">openjdk (2)</a> <a class="mt-1 mb-1" href="/tags#react">react (2)</a> <a class="mt-1 mb-1" href="/tags#showdev">showdev (2)</a> <a class="mt-1 mb-1" href="/tags#webassembly">webassembly (2)</a> <a class="mt-1 mb-1" href="/tags#webdev">webdev (2)</a> <a class="mt-1 mb-1" href="/tags#architecture">architecture (1)</a> <a class="mt-1 mb-1" href="/tags#bash">bash (1)</a> <a class="mt-1 mb-1" href="/tags#blogging">blogging (1)</a> <a class="mt-1 mb-1" href="/tags#books">books (1)</a> <a class="mt-1 mb-1" href="/tags#clojure">clojure (1)</a> <a class="mt-1 mb-1" href="/tags#codenewbie">codenewbie (1)</a> <a class="mt-1 mb-1" href="/tags#desktop">desktop (1)</a> <a class="mt-1 mb-1" href="/tags#developerexperience">developerexperience (1)</a> <a class="mt-1 mb-1" href="/tags#devops">devops (1)</a> <a class="mt-1 mb-1" href="/tags#devrel">devrel (1)</a> <a class="mt-1 mb-1" href="/tags#distributedsystems">distributedsystems (1)</a> <a class="mt-1 mb-1" href="/tags#engineering">engineering (1)</a> <a class="mt-1 mb-1" href="/tags#gaming">gaming (1)</a> <a class="mt-1 mb-1" href="/tags#ide">ide (1)</a> <a class="mt-1 mb-1" href="/tags#interview">interview (1)</a> <a class="mt-1 mb-1" href="/tags#istio">istio (1)</a> <a class="mt-1 mb-1" href="/tags#jdk">jdk (1)</a> <a class="mt-1 mb-1" href="/tags#Jekyll">Jekyll (1)</a> <a class="mt-1 mb-1" href="/tags#js">js (1)</a> <a class="mt-1 mb-1" href="/tags#jvm">jvm (1)</a> <a class="mt-1 mb-1" href="/tags#kotlin">kotlin (1)</a> <a class="mt-1 mb-1" href="/tags#loom">loom (1)</a> <a class="mt-1 mb-1" href="/tags#medium">medium (1)</a> <a class="mt-1 mb-1" href="/tags#memory-management">memory-management (1)</a> <a class="mt-1 mb-1" href="/tags#motivation">motivation (1)</a> <a class="mt-1 mb-1" href="/tags#multithreading">multithreading (1)</a> <a class="mt-1 mb-1" href="/tags#ohmyzsh">ohmyzsh (1)</a> <a class="mt-1 mb-1" href="/tags#opensource">opensource (1)</a> <a class="mt-1 mb-1" href="/tags#patternmatching">patternmatching (1)</a> <a class="mt-1 mb-1" href="/tags#polyglot">polyglot (1)</a> <a class="mt-1 mb-1" href="/tags#pragmatic">pragmatic (1)</a> <a class="mt-1 mb-1" href="/tags#python">python (1)</a> <a class="mt-1 mb-1" href="/tags#ruby">ruby (1)</a> <a class="mt-1 mb-1" href="/tags#scala">scala (1)</a> <a class="mt-1 mb-1" href="/tags#svelte">svelte (1)</a> <a class="mt-1 mb-1" href="/tags#tech">tech (1)</a> <a class="mt-1 mb-1" href="/tags#terminal">terminal (1)</a> <a class="mt-1 mb-1" href="/tags#terraform">terraform (1)</a> <a class="mt-1 mb-1" href="/tags#ubuntu">ubuntu (1)</a> <a class="mt-1 mb-1" href="/tags#v8">v8 (1)</a> <a class="mt-1 mb-1" href="/tags#vr">vr (1)</a> <a class="mt-1 mb-1" href="/tags#vscode">vscode (1)</a> <a class="mt-1 mb-1" href="/tags#web">web (1)</a> <a class="mt-1 mb-1" href="/tags#windows">windows (1)</a> <a class="mt-1 mb-1" href="/tags#womenintech">womenintech (1)</a> <a class="mt-1 mb-1" href="/tags#writing">writing (1)</a> <a class="mt-1 mb-1" href="/tags#zsh">zsh (1)</a></div></div></div><footer class="footer"><div class="container"><div class="row"><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2022 Deepu K Sasidharan<br><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img class="lozad" alt="Creative Commons License" style="border-width:0" src="/assets/images/placeholder.jpg" data-src="https://i.creativecommons.org/l/by/4.0/88x31.png"> </a>Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target="_blank" href="https://www.wowthemes.net/mediumish-free-jekyll-template/">Mediumish Jekyll Theme</a> by WowThemes.net | Domain by <a href="https://js.org" target="_blank" title="JS.ORG | JavaScript Community"><img src="/assets/images/placeholder.jpg" data-src="https://logo.js.org/dark_tiny.png" style="width:50px" alt="JS.ORG Logo" class="lozad"> </a>| Hosted with <i class="far fa-heart"></i> by <a href="https://pages.github.com/" target="_blank">Github</a></div></div></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js" integrity="sha256-34Si1Y6llMBKM3G0jQILVeoQKEwuxjbk4zGWXXMT4ps=" crossorigin="anonymous"></script><script async src="/assets/js/lunrsearchengine.js"></script><script async src="/assets/js/mediumish.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js" integrity="sha256-hstwhDmGVwZjIwt6SlTG6sQBREWrWTBjVTik/JLlb1Y=" crossorigin="anonymous"></script><script>// lazy loads images
        const lazyloadObserver = lozad()
        lazyloadObserver.observe();</script><script async src="/assets/js/ie10-viewport-bug-workaround.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74370272-6"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-74370272-6")</script></body></html>