<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="icon" href="/assets/images/logo.png"><title>React components done right with TypeScript mapped and conditional types | Technorage</title><meta name="generator" content="Jekyll v4.1.1"><meta property="og:title" content="React components done right with TypeScript mapped and conditional types"><meta name="author" content="deepu"><meta property="og:locale" content="en_US"><meta name="description" content="Learn how to write efficient and concise react components using TypeScript."><meta property="og:description" content="Learn how to write efficient and concise react components using TypeScript."><link rel="canonical" href="https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79"><meta property="og:url" content="https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79"><meta property="og:site_name" content="Technorage"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-11-19T00:00:00+01:00"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="React components done right with TypeScript mapped and conditional types"><script type="application/ld+json">{"author":{"@type":"Person","name":"deepu"},"description":"Learn how to write efficient and concise react components using TypeScript.","headline":"React components done right with TypeScript mapped and conditional types","dateModified":"2018-11-19T00:00:00+01:00","datePublished":"2018-11-19T00:00:00+01:00","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://deepu.tech/assets/images/logo.png"},"name":"deepu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79"},"url":"https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79","@context":"https://schema.org"}</script><link rel="canonical" href="https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79"><meta property="og:url" content=""><meta name="monetization" content="$ilp.uphold.com/Aw7eGpxKNyK7"><meta name="twitter:site" content="@deepu105"><meta name="twitter:creator" content="@deepu105"><meta name="twitter:title" content="React components done right with TypeScript mapped and conditional types"><meta name="twitter:description" content="Learn how to write efficient and concise react components using TypeScript."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://thepracticaldev.s3.amazonaws.com/i/4eaahfl09brz9ozacdg1.jpeg"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha256-L/W5Wfqfa0sdBNIKN9cG6QA5F2qx4qICmU2VgLruv9Y=" crossorigin="anonymous"><link href="/assets/css/screen.css" rel="stylesheet"><link href="/assets/css/main.css" rel="stylesheet"></head><body class="layout-post"><noscript id="deferred-styles"><link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" crossorigin="anonymous"></noscript><nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down pr-md-0 pl-md-0"><div class="container d-flex align-items-center"><a class="navbar-brand" href="/"><h2>Deepu K Sasidharan</h2></a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarMediumish"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">About</a></li><li class="nav-item active"><a class="nav-link" href="/blogs/"><i class="fas fa-blog"></i> Blog</a></li><li class="nav-item"><a class="nav-link" href="/books"><i class="fas fa-book"></i> Books</a></li><li class="nav-item"><a target="_blank" class="nav-link" href="https://www.youtube.com/playlist?list=PLxayiD7e52nPpb-sSaoOPc-zXGhmOaNHK"><i class="fab fa-youtube"></i> Videos</a></li><li class="nav-item"><a target="_blank" class="nav-link" href="https://speakerdeck.com/deepu105"><i class="fab fa-speaker-deck"></i> Presentations</a></li><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js" integrity="sha256-34Si1Y6llMBKM3G0jQILVeoQKEwuxjbk4zGWXXMT4ps=" crossorigin="anonymous"></script><style>.lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}</style><form class="bd-search" onsubmit="return lunr_search(document.getElementById('lunrsearch').value);"><input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."></form><div id="lunrsearchresults"><ul></ul></div><script src="/assets/js/lunrsearchengine.js"></script></ul></div></div></nav><div class="site-content"><div class="container"><div class="main-content"><div class="mainheading"><h1 class="sitetitle">Technorage</h1><p class="lead">Where I rage about technology and stuff!</p></div><div class="container"><div class="row"><div class="col-lg-2 pl-0"><div class="sticky-top sticky-top-offset"><div class="popover-wrapper d-none d-lg-block"><a href="#"><h2 class="popover-title"><i class="fas fa-stream fa-lg"></i> TOC</h2></a><div class="popover-content"><div class="toc lead"><h3 class="font-weight-bold">Summary</h3><ul><li><a href="#index-types">Index types</a></li><li><a href="#mapped-types">Mapped types</a></li><li><a href="#conditional-types">Conditional types</a></li><li><a href="#let-us-put-it-into-use">Let us put it into use</a><ul><li><a href="#react-component-and-redux-reducer-in-es6">React component and Redux reducer in ES6</a></li><li><a href="#react-component-and-redux-reducer-in-typescript">React component and Redux reducer in TypeScript</a></li><li><a href="#react-component-and-redux-reducer-in-typescript-with-advanced-types">React component and Redux reducer in TypeScript with advanced types</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></div></div></div><div class="share"><p>Share</p><ul><li class="ml-1 mr-1"><a target="_blank" href="https://twitter.com/intent/tweet?text=React components done right with TypeScript mapped and conditional types by @deepu105 &url=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" title="Linkedin"><i class="fab fa-linkedin-in"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://news.ycombinator.com/submitlink?u=https://deepu.tech/react-done-right-with-typescript/&t=React components done right with TypeScript mapped and conditional types" onclick="window.open(this.href, 'hackernews-share', 'width=550,height=435');return false;" title="Hacker News"><i class="fab fa-hacker-news-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.reddit.com/submit?url=https://deepu.tech/react-done-right-with-typescript/&title=React components done right with TypeScript mapped and conditional types" onclick="window.open(this.href, 'reddit-share', 'width=550,height=435');return false;" title="Reddit"><i class="fab fa-reddit-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://facebook.com/sharer.php?u=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" title="Facebook"><i class="fab fa-facebook-f"></i></a></li></ul><div class="sep"></div><ul><li><a class="small smoothscroll" href="#disqus_thread"></a></li></ul></div><div class="ad-vertical-md"><script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3I&placement=deeputech" id="_carbonads_js"></script></div></div></div><div class="col-lg-9 flex-first flex-lg-unordered"><div class="mainheading"><h1 class="posttitle">React components done right with TypeScript mapped and conditional types</h1><img data-src="https://thepracticaldev.s3.amazonaws.com/i/4eaahfl09brz9ozacdg1.jpeg" alt="React components done right with TypeScript mapped and conditional types" class="featured-image img-fluid lozad" src="/assets/images/placeholder.jpg"><div class="row post-top-meta"><div class="col-12 text-center text-md-left mb-4 mb-md-0"><img class="author-thumb lozad" src="/assets/images/placeholder.jpg" data-src="https://www.gravatar.com/avatar/7f408bc67dc9ae3b288ee92d16d3c4c2?s=250&d=mm&r=x" alt="Deepu K Sasidharan"> <a target="_blank" class="link-dark" href="https://www.deepu.tech">Deepu K Sasidharan</a><a target="_blank" href="https://twitter.com/deepu105" class="btn follow">Follow</a><span class="separator d-none d-md-inline-block">| </span><span class="author-description"><small><time class="post-date" datetime="2018-11-19">19 Nov 2018</time> </small><span class="separator d-inline-block">| </span><small>11 mins read</small> <span class="separator d-inline-block d-lg-none">| </span><span class="d-inline-block d-lg-none"><div class="share" style="margin-top: 0;"><ul><li class="ml-1 mr-1"><a target="_blank" href="https://twitter.com/intent/tweet?text=React components done right with TypeScript mapped and conditional types by @deepu105 &url=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Twitter"><i class="fab fa-twitter"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'linkedin-share', 'width=550,height=435');return false;" title="Linkedin"><i class="fab fa-linkedin-in"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://news.ycombinator.com/submitlink?u=https://deepu.tech/react-done-right-with-typescript/&t=React components done right with TypeScript mapped and conditional types" onclick="window.open(this.href, 'hackernews-share', 'width=550,height=435');return false;" title="Hacker News"><i class="fab fa-hacker-news-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://www.reddit.com/submit?url=https://deepu.tech/react-done-right-with-typescript/&title=React components done right with TypeScript mapped and conditional types" onclick="window.open(this.href, 'reddit-share', 'width=550,height=435');return false;" title="Reddit"><i class="fab fa-reddit-square"></i></a></li><li class="ml-1 mr-1"><a target="_blank" href="https://facebook.com/sharer.php?u=https://deepu.tech/react-done-right-with-typescript/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;" title="Facebook"><i class="fab fa-facebook-f"></i></a></li></ul></div></span></span></div></div></div><div class="article-post"><p>You’ve probably heard about TypeScript, If not you should check it out. You may have heard someone claiming how great type safety is.</p><p>TypeScript is great. As someone who hates to transpile his code, I would definitely do it with TypeScript if I had to. So much has been said about TypeScript, and there isn’t really anything new that I can add. But I do believe that type safety is not all about making your code ugly with type definitions everywhere. So how can we write type-safe code without having to litter type declarations everywhere?</p><p>Type inference and advanced features like derived and dynamic types are the answer. Editors and IDEs we use are smart enough to handle code with inferred type gracefully without us having to see the types all the time visually. (Of course, they all usually show you the type when you hover over an inferred type.)</p><p>TypeScript has very good type inference. As a rule of thumb, you can always start without declaring the type for any variable and see if the compiler infers it. With modern editors like VSCode, you can see this immediately. So set your tsconfig to the strict mode. Then start declaring types when the compiler complains.</p><p>Additionally, TypeScript 2.1 and 2.8 introduced a bunch of cool lookup types. Now you can dynamically infer types using different techniques like Intersection types, Union types, Index types, mapped types and conditional types.</p><h2 id="index-types">Index types</h2><p>Index types enable us to check properties and types of an interface or type dynamically using the <code class="language-plaintext highlighter-rouge">keyof T</code> (<strong>index type query operator</strong>) and <code class="language-plaintext highlighter-rouge">T[K]</code> (<strong>indexed access operator</strong>). Let’s take the below interface for example.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">address</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">sayHi</span><span class="p">:</span> <span class="p">(</span><span class="nx">msg</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">keyof T</code> operator gets a union type of all the key names of the type <code class="language-plaintext highlighter-rouge">T</code> and hence <code class="language-plaintext highlighter-rouge">keyof Person</code> will give us <code class="language-plaintext highlighter-rouge">'name' | 'age' | 'address' | sayHi'</code> as result.</p><p>The <code class="language-plaintext highlighter-rouge">T[K]</code> operator gets the type for the provided key. <code class="language-plaintext highlighter-rouge">Person['name']</code> will result in <code class="language-plaintext highlighter-rouge">string</code> and <code class="language-plaintext highlighter-rouge">Person[*keyof* Person]</code> will result in <code class="language-plaintext highlighter-rouge">string | number | ((msg: string) =&gt; string)</code>.</p><h2 id="mapped-types">Mapped types</h2><p>Let us see what mapped types are. Let us say we have the below interface for a Person.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">Person</span> <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">address</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">sayHi</span><span class="p">:</span> <span class="p">(</span><span class="nx">msg</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>Now in every project, it is almost always a common requirement to have variations of a certain interface. For example, let’s say we need a read-only version of the person as below.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kr">interface</span> <span class="nx">ReadonlyPerson</span> <span class="p">{</span>
    <span class="k">readonly</span> <span class="nx">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="k">readonly</span> <span class="nx">age</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="k">readonly</span> <span class="nx">address</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="k">readonly</span> <span class="nx">sayHi</span><span class="p">:</span> <span class="p">(</span><span class="nx">msg</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>In this case, we would have to replicate the Person interface and we have to keep them in sync manually. This is where mapped types will come in handy, so let us use the builtin mapped type, <code class="language-plaintext highlighter-rouge">Readonly</code>, for this.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">ReadonlyPerson</span> <span class="o">=</span> <span class="nb">Readonly</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>If you hover over the <code class="language-plaintext highlighter-rouge">ReadonlyPerson</code> type you can see the inferred type as below.</p><p><img src="https://cdn-images-1.medium.com/max/2000/1*GLnLx-iMscyEMe9BQqCazg.png" alt="Inferred type view in VsCode"><em>Inferred type view in VsCode</em></p><p>That is cool, right? Now we can create types from existing types and don’t have to worry about keeping them in sync. How does it work, what does <code class="language-plaintext highlighter-rouge">Readonly&lt;Person&gt;</code> do? Let’s take a look at the mapped type.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nb">Readonly</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">readonly</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">];</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">in</code> operator from TypeScript does the trick here. It maps all the declarations of the existing type into the new type. The <code class="language-plaintext highlighter-rouge">keyof</code> operator provides the keys from our type for the mapping. Let us build our own mapped type.</p><p>Let us say we need a read-only Person interface where all the fields are nullable as well. We can build a mapped type as below for that.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">ReadonlyNullablePerson</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">readonly</span> <span class="p">[</span><span class="nx">P</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">Person</span><span class="p">]:</span> <span class="nx">Person</span><span class="p">[</span><span class="nx">P</span><span class="p">]</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>And it is inferred as below</p><p><img src="https://cdn-images-1.medium.com/max/2000/1*R24n6ufx4STh96tfldlgJw.png" alt=""></p><p>Let’s make it generic so that it can be used with any interface.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">ReadonlyNullable</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
    <span class="k">readonly</span> <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">type</span> <span class="nx">ReadonlyNullablePerson</span> <span class="o">=</span> <span class="nx">ReadonlyNullable</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>TypeScript includes <code class="language-plaintext highlighter-rouge">Readonly&lt;T&gt;</code>, <code class="language-plaintext highlighter-rouge">Partial&lt;T&gt;</code>, <code class="language-plaintext highlighter-rouge">Pick&lt;T, K extends keyof T&gt;</code> and <code class="language-plaintext highlighter-rouge">Record&lt;K extends string, T&gt;</code> as built-in mapped types. Pick and Record can be used as below, check them in your editor to see what types they produce.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">PersonMinimal</span> <span class="o">=</span> <span class="nb">Pick</span><span class="o">&lt;</span><span class="nx">Person</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">age</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">RecordedPerson</span> <span class="o">=</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="o">|</span> <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span><span class="p">,</span> <span class="kr">string</span><span class="o">&gt;</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>For every other use case, you can build your own mapped types.</p><h2 id="conditional-types">Conditional types</h2><blockquote><p>A conditional type selects one of two possible types based on a condition expressed as a type relationship test.</p></blockquote><p>Let us look at an example.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">Foo</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">U</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">T</span> <span class="kd">extends</span> <span class="nx">U</span> <span class="p">?</span> <span class="kr">string</span> <span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">Me</span> <span class="p">{}</span>
<span class="kr">interface</span> <span class="nx">You</span> <span class="kd">extends</span> <span class="nx">Person</span> <span class="p">{}</span>

<span class="kd">type</span> <span class="nx">FooBool</span> <span class="o">=</span> <span class="nx">Foo</span><span class="o">&lt;</span><span class="nx">Me</span><span class="p">,</span> <span class="nx">Person</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// will result in boolean</span>
<span class="kd">type</span> <span class="nx">FooString</span> <span class="o">=</span> <span class="nx">Foo</span><span class="o">&lt;</span><span class="nx">You</span><span class="p">,</span> <span class="nx">Person</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// will result in string</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>The type dynamically inferred from <code class="language-plaintext highlighter-rouge">Foo&lt;T, U&gt;</code> will be either <code class="language-plaintext highlighter-rouge">string</code> or <code class="language-plaintext highlighter-rouge">boolean</code> depending on what the first generic is extended from.</p><p>Let us see how we can mix conditional types with mapped types to infer a new type from Person which only includes the non-function properties.</p><div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">type</span> <span class="nx">NonFunctionPropNames</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">[</span><span class="nx">K</span> <span class="k">in</span> <span class="kr">keyof</span> <span class="nx">T</span><span class="p">]:</span> <span class="nx">T</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span> <span class="kd">extends</span> <span class="nb">Function</span> <span class="p">?</span> <span class="nx">never</span> <span class="p">:</span> <span class="nx">K</span><span class="p">;</span>
<span class="p">}[</span><span class="kr">keyof</span> <span class="nx">T</span><span class="p">];</span>

<span class="kd">type</span> <span class="nx">NonFunctionProps</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">Pick</span><span class="o">&lt;</span><span class="nx">T</span><span class="p">,</span> <span class="nx">NonFunctionPropNames</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;&gt;</span><span class="p">;</span>

<span class="kd">type</span> <span class="nx">PersonProps</span> <span class="o">=</span> <span class="nx">NonFunctionProps</span><span class="o">&lt;</span><span class="nx">Person</span><span class="o">&gt;</span><span class="p">;</span>

<span class="cm">/* Produces the below type
    type PersonProps = {
        name: string;
        age: number;
        address: string;
    }
    */</span>
</pre></td></tr></tbody></table></code></pre></div></div><p>We first get all the non-function property names from the interface. Then use the <strong>Pick</strong> mapped type to pick those from the interface to form the new interface.</p><p>TypeScript provides the following inbuilt conditional types:</p><ul><li><p><code class="language-plaintext highlighter-rouge">Exclude&lt;T, U&gt;</code> – Exclude from <code class="language-plaintext highlighter-rouge">T</code> those types that are assignable to <code class="language-plaintext highlighter-rouge">U</code>.</p></li><li><p><code class="language-plaintext highlighter-rouge">Extract&lt;T, U&gt;</code> – Extract from <code class="language-plaintext highlighter-rouge">T</code> those types that are assignable to <code class="language-plaintext highlighter-rouge">U</code>.</p></li><li><p><code class="language-plaintext highlighter-rouge">NonNullable&lt;T&gt;</code> – Exclude <code class="language-plaintext highlighter-rouge">null</code> and <code class="language-plaintext highlighter-rouge">undefined</code> from <code class="language-plaintext highlighter-rouge">T</code>.</p></li><li><p><code class="language-plaintext highlighter-rouge">ReturnType&lt;T&gt;</code> – Obtain the return type of a function type.</p></li><li><p><code class="language-plaintext highlighter-rouge">InstanceType&lt;T&gt;</code> – Obtain the instance type of a constructor function type.</p></li></ul><h2 id="let-us-put-it-into-use">Let us put it into use</h2><p>These advanced types become even more powerful when you combine them together. Let’s see some practical uses of this in React.</p><h3 id="react-component-and-redux-reducer-in-es6">React component and Redux reducer in ES6</h3><p>Let see a simple React component with a reducer written in ES6. Take a look at <strong><em>index.jsx</em></strong> in the below code sandbox:</p><p></p><div class="embed-video-container"><iframe data-src="https://codesandbox.io/embed/40n3y52qlx?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin" class="lozad"></iframe></div><p></p><p>As you can see, we use the prop-types library to define the component props. It is not the most efficient way, as it includes considerable overhead during development. It doesn’t provide full type safety anyway.</p><h3 id="react-component-and-redux-reducer-in-typescript">React component and Redux reducer in TypeScript</h3><p>Now let us convert this simple example to TypeScript so that it is type safe. Take a look at <strong><em>index.tsx</em></strong> in the below code sandbox:</p><p></p><div class="embed-video-container"><iframe data-src="https://codesandbox.io/embed/znv36k09op?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin" class="lozad"></iframe></div><p></p><p>As you can see, the code is more type-safe now. It is also much more verbose even without PropTypes library and all the type inference.</p><h3 id="react-component-and-redux-reducer-in-typescript-with-advanced-types">React component and Redux reducer in TypeScript with advanced types</h3><p>Now let us apply the advanced types that we learned to make this example less verbose and even more type safe. Take a look at <strong><em>index.tsx</em></strong> in the below code sandbox:</p><p></p><div class="embed-video-container"><iframe data-src="https://codesandbox.io/embed/zq7w69p57x?fontsize=14" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin" class="lozad"></iframe></div><p></p><p>As you can see, we used <code class="language-plaintext highlighter-rouge">Readonly</code> and <code class="language-plaintext highlighter-rouge">ReturnType</code> mapping along with some other type inference techniques to write a more type-safe but less verbose version of the component.</p><h2 id="conclusion">Conclusion</h2><p>If you are using React with TypeScript, then these are some of the techniques you must apply. If you are considering a type system for React, then look no further than TypeScript. It has great features, great tooling, excellent IDE/Editor support and an awesome community.</p><p>I gave a talk on TypeScript for Devoxx 2018, and you can see the video and slides if you like here.</p><p></p><div class="embed-video-container"><iframe class="lozad" width="710" height="399" data-src="https://www.youtube.com/embed/SBwGH4kbkms " allowfullscreen=""></iframe></div><p></p><p><script async="" class="speakerdeck-embed" data-id="ffe22480dbfd4c1f83f66c380bba2283" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script><noscript><a href="//speakerdeck.com/player/ffe22480dbfd4c1f83f66c380bba2283"><img alt="Speakerdeck" class="lozad" src="{{ site.baseurl }}/assets/images/placeholder.jpg" data-src="//speakerd.s3.amazonaws.com/presentations/ffe22480dbfd4c1f83f66c380bba2283/slide_0.jpg"></a></noscript></p><hr><p>Check out my book “<em>Full Stack Development with JHipster</em>” on <a href="https://www.amazon.com/Stack-Development-JHipster-Deepu-Sasidharan/dp/178847631X">Amazon</a> and <a href="https://www.packtpub.com/application-development/full-stack-development-jhipster">Packt</a> if you like to learn about Full stack development with an awesome stack that includes TypeScript and React.</p><p>If you like JHipster don’t forget to give it a star on <a href="https://github.com/jhipster/generator-jhipster">Github</a>.</p><p>If you like this article, please like or comment.</p><p>You can follow me on <a href="https://twitter.com/deepu105">Twitter</a> and <a href="https://www.linkedin.com/in/deepu05/">LinkedIn</a>.</p><p>Originally published in <a href="https://medium.com/free-code-camp/make-react-components-great-again-with-typescript-mapped-and-conditional-types-fa729bfc1a79">Medium</a> on November 19, 2018</p><p><em>Also published at <a href="https://dev.to/deepu105/react-components-done-right-with-typescript-mapped-and-conditional-types-420l">Dev.to</a></em></p></div><div class="after-post-cats"><ul class="tags mb-4"></ul></div><div class="after-post-tags"><ul class="tags"><li><a class="smoothscroll" href="/tags#javascript">#javascript</a></li><li><a class="smoothscroll" href="/tags#react">#react</a></li><li><a class="smoothscroll" href="/tags#typescript">#typescript</a></li><li><a class="smoothscroll" href="/tags#webdev">#webdev</a></li></ul></div><div class="row PageNavigation d-flex justify-content-between font-weight-bold"><a class="prev d-block col-md-6" href="/deploying-jhipster-microservices-on-azure-kubernetes-service-aks/">&laquo; Deploying JHipster Microservices on Azure Kubernetes Service (AKS)</a> <a class="next d-block col-md-6 text-lg-right" href="/deploy-a-web-app-to-azure-app-service-using-terraform/">Deploy a web app to Azure App Service using Terraform &raquo;</a><div class="clearfix"></div></div></div></div></div><div class="container"><div id="comments" class="row justify-content-center mb-5"><div class="col-md-8"><section class="disqus"><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'deepu-tech'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section></div></div></div></div><div class="alertbar"><div class="container text-center"><span>Never miss a <b>story</b> from us, subscribe to our newsletter</span><form action="https://tech.us7.list-manage.com/subscribe/post?u=00729f6c6d6bb180801b9484e&amp;id=f521dede4b" method="post" name="mc-embedded-subscribe-form" id="mc-embedded-subscribe-form" class="wj-contact-form validate" target="_blank" novalidate><div class="mc-field-group"><input type="email" placeholder="Email address" name="EMAIL" class="required email" id="mce-EMAIL" autocomplete="on" required> <input type="submit" value="Subscribe" name="subscribe" class="heart"></div></form></div></div></div><div class="jumbotron fortags lozad" data-background-image="/assets/images/jumbotron.jpg"><div class="d-md-flex h-100"><div class="col-md-4 transpdark align-self-center text-center h-100"><div class="d-md-flex align-items-center justify-content-center h-100"><h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span class="d-none d-md-inline">→</span></h2></div></div><div class="col-md-8 p-5 align-self-center text-center"><a class="mt-1 mb-1" href="/tags#jhipster">jhipster (3)</a> <a class="mt-1 mb-1" href="/tags#java">java (6)</a> <a class="mt-1 mb-1" href="/tags#microservices">microservices (5)</a> <a class="mt-1 mb-1" href="/tags#docker">docker (2)</a> <a class="mt-1 mb-1" href="/tags#azure">azure (2)</a> <a class="mt-1 mb-1" href="/tags#kubernetes">kubernetes (3)</a> <a class="mt-1 mb-1" href="/tags#typescript">typescript (5)</a> <a class="mt-1 mb-1" href="/tags#react">react (2)</a> <a class="mt-1 mb-1" href="/tags#javascript">javascript (12)</a> <a class="mt-1 mb-1" href="/tags#webdev">webdev (2)</a> <a class="mt-1 mb-1" href="/tags#terraform">terraform (1)</a> <a class="mt-1 mb-1" href="/tags#writing">writing (1)</a> <a class="mt-1 mb-1" href="/tags#medium">medium (1)</a> <a class="mt-1 mb-1" href="/tags#development">development (3)</a> <a class="mt-1 mb-1" href="/tags#tech">tech (1)</a> <a class="mt-1 mb-1" href="/tags#linux">linux (3)</a> <a class="mt-1 mb-1" href="/tags#fedora">fedora (2)</a> <a class="mt-1 mb-1" href="/tags#gnome">gnome (2)</a> <a class="mt-1 mb-1" href="/tags#desktop">desktop (1)</a> <a class="mt-1 mb-1" href="/tags#terminal">terminal (1)</a> <a class="mt-1 mb-1" href="/tags#ohmyzsh">ohmyzsh (1)</a> <a class="mt-1 mb-1" href="/tags#zsh">zsh (1)</a> <a class="mt-1 mb-1" href="/tags#go">go (5)</a> <a class="mt-1 mb-1" href="/tags#programming">programming (13)</a> <a class="mt-1 mb-1" href="/tags#languages">languages (12)</a> <a class="mt-1 mb-1" href="/tags#thepragmaticprogrammer">thepragmaticprogrammer (3)</a> <a class="mt-1 mb-1" href="/tags#vscode">vscode (1)</a> <a class="mt-1 mb-1" href="/tags#ide">ide (1)</a> <a class="mt-1 mb-1" href="/tags#opensource">opensource (1)</a> <a class="mt-1 mb-1" href="/tags#istio">istio (1)</a> <a class="mt-1 mb-1" href="/tags#functional">functional (4)</a> <a class="mt-1 mb-1" href="/tags#beginners">beginners (8)</a> <a class="mt-1 mb-1" href="/tags#showdev">showdev (2)</a> <a class="mt-1 mb-1" href="/tags#ruby">ruby (1)</a> <a class="mt-1 mb-1" href="/tags#Jekyll">Jekyll (1)</a> <a class="mt-1 mb-1" href="/tags#blogging">blogging (1)</a> <a class="mt-1 mb-1" href="/tags#architecture">architecture (1)</a> <a class="mt-1 mb-1" href="/tags#devops">devops (1)</a> <a class="mt-1 mb-1" href="/tags#distributedsystems">distributedsystems (1)</a> <a class="mt-1 mb-1" href="/tags#rust">rust (5)</a> <a class="mt-1 mb-1" href="/tags#bash">bash (1)</a> <a class="mt-1 mb-1" href="/tags#codenewbie">codenewbie (1)</a> <a class="mt-1 mb-1" href="/tags#codequality">codequality (2)</a> <a class="mt-1 mb-1" href="/tags#career">career (2)</a> <a class="mt-1 mb-1" href="/tags#computerscience">computerscience (4)</a> <a class="mt-1 mb-1" href="/tags#motivation">motivation (1)</a> <a class="mt-1 mb-1" href="/tags#books">books (1)</a> <a class="mt-1 mb-1" href="/tags#kotlin">kotlin (1)</a> <a class="mt-1 mb-1" href="/tags#scala">scala (1)</a> <a class="mt-1 mb-1" href="/tags#clojure">clojure (1)</a> <a class="mt-1 mb-1" href="/tags#WebAssembly">WebAssembly (1)</a> <a class="mt-1 mb-1" href="/tags#node">node (2)</a> <a class="mt-1 mb-1" href="/tags#python">python (1)</a> <a class="mt-1 mb-1" href="/tags#garbagecollection">garbagecollection (2)</a> <a class="mt-1 mb-1" href="/tags#nodejs">nodejs (2)</a> <a class="mt-1 mb-1" href="/tags#deno">deno (2)</a> <a class="mt-1 mb-1" href="/tags#v8">v8 (1)</a> <a class="mt-1 mb-1" href="/tags#memory-management">memory-management (1)</a> <a class="mt-1 mb-1" href="/tags#windows">windows (1)</a> <a class="mt-1 mb-1" href="/tags#vr">vr (1)</a> <a class="mt-1 mb-1" href="/tags#gaming">gaming (1)</a> <a class="mt-1 mb-1" href="/tags#polyglot">polyglot (1)</a> <a class="mt-1 mb-1" href="/tags#interview">interview (1)</a> <a class="mt-1 mb-1" href="/tags#womenintech">womenintech (1)</a> <a class="mt-1 mb-1" href="/tags#discuss">discuss (1)</a> <a class="mt-1 mb-1" href="/tags#pragmatic">pragmatic (1)</a> <a class="mt-1 mb-1" href="/tags#concurrency">concurrency (5)</a> <a class="mt-1 mb-1" href="/tags#async">async (3)</a> <a class="mt-1 mb-1" href="/tags#multithreading">multithreading (1)</a> <a class="mt-1 mb-1" href="/tags#golang">golang (1)</a> <a class="mt-1 mb-1" href="/tags#svelte">svelte (1)</a> <a class="mt-1 mb-1" href="/tags#web">web (1)</a></div></div></div><footer class="footer"><div class="container"><div class="row"><div class="col-md-6 col-sm-6 text-center text-lg-left">Copyright © 2021 Deepu K Sasidharan<br><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img class="lozad" alt="Creative Commons License" style="border-width:0" src="/assets/images/placeholder.jpg" data-src="https://i.creativecommons.org/l/by/4.0/88x31.png"> </a>Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</div><div class="col-md-6 col-sm-6 text-center text-lg-right"><a target="_blank" href="https://www.wowthemes.net/mediumish-free-jekyll-template/">Mediumish Jekyll Theme</a> by WowThemes.net | Domain by <a href="https://js.org" target="_blank" title="JS.ORG | JavaScript Community"><img src="/assets/images/placeholder.jpg" data-src="https://logo.js.org/dark_tiny.png" style="width:50px" alt="JS.ORG Logo" class="lozad"> </a>| Hosted with <i class="far fa-heart"></i> by <a href="https://pages.github.com/" target="_blank">Github</a></div></div></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha256-WqU1JavFxSAMcLP2WIOI+GB2zWmShMI82mTpLDcqFUg=" crossorigin="anonymous"></script><script async src="/assets/js/mediumish.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js" integrity="sha256-hstwhDmGVwZjIwt6SlTG6sQBREWrWTBjVTik/JLlb1Y=" crossorigin="anonymous"></script><script>// lazy loads images
        const lazyloadObserver = lozad()
        lazyloadObserver.observe();</script><script async src="/assets/js/ie10-viewport-bug-workaround.js"></script><script async id="dsq-count-scr" src="//deepu-tech.disqus.com/count.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-74370272-6"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-74370272-6');</script></body></html>